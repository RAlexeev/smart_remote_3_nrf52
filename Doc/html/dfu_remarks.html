<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Smart Remote 3 nRF52 v1.2 : DFU - before you start</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Smart Remote 3 nRF52 v1.2
   </div>
  </td>
 </tr>
 </tbody>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s130","s132","s212","s332"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="usergroup0.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dfu_remarks.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DFU - before you start </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>It is important that you are well aware of the differences between the DFU procedure implemented by the nRF5 SDK and the one implemented by Smart Remote before running an OTA-DFU procedure. The aim of this section is to gather all these differences in one place to help you perform a successful and safe DFU procedure on your device.</p>
<h1>Differences between the reference design (Smart Remote) and SDK code</h1>
<h2>Inactivity timeout</h2>
<p>After entering the DFU mode, if you do not start an update within 120 seconds, the bootloader re-enters the application, if it still exists in the flash memory.</p>
<p>If the application no longer exists in flash, for example because a SoftDevice update was performed, then after a specified timeout, the bootloader enters low power advertising mode. Long advertising interval is used in this mode to save battery.</p>
<h2>Improved SoftDevice compatibility checks</h2>
<p>To prevent running the application with an incompatible SoftDevice, which could result in bricking of the device, you cannot upgrade the SoftDevice without upgrading the bootloader, unless you are only updating the SoftDevice by a <em>bugfix</em> version.</p>
<p>The version number of the SoftDevice represents the following hierarchy: <em>major.minor.bugfix</em>. If you attempt to change the <em>major</em> or <em>minor</em> version of the SoftDevice without updating the bootloader, the update will be refused. If you change the <em>major</em> or <em>minor</em> version of the SoftDevice together with the bootloader, the application will be invalidated.</p>
<dl class="section warning"><dt>Warning</dt><dd>To prevent bricking of the device when updating the SoftDevice together with the bootloader, make sure that the bootloader binary is compatible with the new SoftDevice.</dd></dl>
<h2>Allow bootloader reloading</h2>
<p>The bootloader allows for an update using the same version of the bootloader. This prevents a situation where the DFU process cannot continue after being interrupted in its second stage. This applies to two-stage DFU procedures in which the SoftDevice and the bootloader are updated first before the application image.</p>
<h2>Bootloader/application shared data</h2>
<p>The application data that is shared with bootloader (information about bonds and device name) is updated directly from the application code, without any calls to the bootloader code.</p>
<h2>Fallback open advertising mode</h2>
<p>In case the shared information provided by the application via the bootloader settings is corrupted, and the application does no longer exist (it was erased during the DFU procedure), the bootloader switches to fallback open advertising mode to allow continuation of the DFU process.</p>
<p>If shared information is corrupted but the application is available, the bootloader interrupts the DFU procedure and boots to the application, which rewrites shared data on the next DFU attempt.</p>
<p>If the bond information is valid, the bootloader always uses it and connects only to a bonded device.</p>
<h2>Service change indication</h2>
<p>After every application update via DFU, the application sends a service change indication.</p>
<h2>Application checksum verification</h2>
<p>The bootloader does not check the application checksum when leaving low power mode. The application checksum is checked when the device is powered up.</p>
<h2>Flow control</h2>
<p>In case flash is not fast enough to store the incoming firmware data, the bootloader delays the response to the host device until the required number of data buffers is available.</p>
<h2>Support for nRF52810</h2>
<p>The Smart Remote bootloader adds modifications required to run it on the nRF52810 SoC.</p>
<p>Due to smaller flash and RAM area available on nRF52810, there are significant configuration differences for the bootloader targeting nRF52832 and nRF52810. On nRF52810, it is not possible to update the bootloader or the SoftDevice (only the application can be updated). When the application is downloaded, the old application is always deleted (the in-place application update model is used). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Thu Jun 7 2018" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

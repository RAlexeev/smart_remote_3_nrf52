<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Smart Remote 3 nRF52 v1.2 : Power management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Smart Remote 3 nRF52 v1.2
   </div>
  </td>
 </tr>
 </tbody>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s130","s132","s212","s332"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="usergroup0.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('power_management.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Power management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A very important quality attribute of the Smart Remote device is its power consumption. A properly designed power management mechanism plays a crucial role in ensuring that the device can run as long as possible with the provided power budget. For typical power measurements, see <a href="http://infocenter.nordicsemi.com/topic/com.nordic.infocenter.rds/dita/rds/designs/smart_remote/smart_remote_3_nrf52/intro/frontpage.html" target="blank">Smart Remote 3 for nRF52 User Guide v2.0</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Power management is controlled with <a class="el" href="group__sr3__config__nrf52832__pca63519.html#gabbf1323a94b3bd926352de270223b554">CONFIG_PWR_MGMT_ENABLED</a> and is enabled by default.</dd></dl>
<h1><a class="anchor" id="pm_modes"></a>
Power modes</h1>
<p>Smart Remote effectively stays in one of two power modes. In normal mode, the device is able to perform any activities, including connecting to a BLE host, transmitting data, and reading information from sensors. In low power mode, also referred to as deep sleep mode, the device turns off all of its peripherals, except those used for triggering a wakeup event, and the SoC enters system off mode.</p>
<h1><a class="anchor" id="pm_dsenter"></a>
Entering deep sleep mode</h1>
<p>The device enters low power mode after <a class="el" href="group__sr3__config__nrf52832__pca63519.html#ga49855719d266d36f3f1cf4cd226cb06a">CONFIG_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S</a> seconds pass without any user activity. Once the switch to low-power mode is started, it cannot be stopped, and the device eventually enters deep sleep mode. To ensure that all peripherals are properly configured (turned off), a notification is sent to the registered modules. Each module that must take action before the device enters low power mode registers a callback function using <a href="http://infocenter.nordicsemi.com/topic/com.nordic.infocenter.sdk5.v14.2.0/group__nrf__pwr__mgmt.html#ga4adfb2cc1fcbfe94a0fb1453b0cf30ec" target="blank">NRF_PWR_MGMT_HANDLER_REGISTER</a>. When this callback is called, the module attempts to switch off. If a switch-off is possible, the callback function returns true. If the shutdown function returns false, the shutdown is postponed. When the module is ready for shutdown, it calls <a href="http://infocenter.nordicsemi.com/topic/com.nordic.infocenter.sdk5.v14.2.0/group__nrf__pwr__mgmt.html#gacc5acf4fd976c9288c7549c8acf16d64" target="blank">nrf_pwr_mgmt_shutdown(NRF_PWR_MGMT_SHUTDOWN_CONTINUE)</a> to reevalute the shutdown function and continue the power-off procedure. The system attempts to continue the shutdown every second.</p>
<p>The order in which the callback functions are executed depends on the priority given during callback registration. </p>
<dl class="section note"><dt>Note</dt><dd>No assumptions can be made about the order in which callback functions are called, if they were registered using the same priority.</dd></dl>
<p>When the last module in the hierarchy confirms its turn-off, the device enters deep sleep mode.</p>
<h1><a class="anchor" id="pm_dsexit"></a>
Leaving deep sleep mode</h1>
<p>The device leaves the deep sleep mode when one of the wakeup events is triggered. Available wakeup event sources are:</p>
<ul>
<li>low power accelerometer (enabled with <a class="el" href="group__sr3__config__nrf52832__pca63519.html#ga39143fb36982e6354a69eb81e3bbb1e7">CONFIG_ACC_WAKEUP_SOURCE</a>),</li>
<li>GPIO keyboard (enabled with <a class="el" href="group__sr3__config__nrf52832__pca63519.html#gaa7e9e476b9767246558e377f5345c700">CONFIG_KBD_WAKEUP_SOURCE</a>),</li>
<li>NFC (enabled with <a class="el" href="group__sr3__config__nrf52832__pca63519.html#gac598d59a604a55a73ea7f9f070a6687c">CONFIG_NFC_WAKEUP_SOURCE</a>).</li>
</ul>
<p>By default, only low power accelerometer is used as a wakeup source.</p>
<dl class="section note"><dt>Note</dt><dd>If a specific device should not be used as a source of the wakeup event, the configuration option mentioned above must be disabled, because wakeup sources are powered on during deep sleep mode.</dd>
<dd>
Only the GPIO-based keyboard can be used as a source of a wakeup event.</dd></dl>
<h1><a class="anchor" id="pm_dsemergency"></a>
Emergency deep sleep mode</h1>
<p>When battery voltage level drops to the level defined by <a class="el" href="group__sr3__config__nrf52832__pca63519.html#ga68e82935e89c219442841daf9c803f9e">CONFIG_BATT_MEAS_MIN_LEVEL</a>, the device enters emergency deep sleep mode. After entering this mode, the device cannot be woken up by any event. To start the device again, remove the old battery set and replace it with a new one.</p>
<dl class="section note"><dt>Note</dt><dd>For the device to enter emergency deep sleep mode, the battery voltage measurement must be enabled by setting <a class="el" href="group__sr3__config__nrf52832__pca63519.html#ga093f8eeda5f541d3e9b1c3a0ca3b8a06">CONFIG_BATT_MEAS_ENABLED</a> accordingly. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Thu Jun 7 2018" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>
